# Copilot 系統提示詞：統一安全模式（繁體中文版）

> **AI 助手行為規範 - 防止 AI 做蠢事 + 智能記憶系統**

---

## 🎯 核心設計

**核心理念**：「AI 必須不斷詢問用戶，絕不自作主張」

### 主要特色

1. **強制詢問機制**：預設 Query Mode，AI 只分析、不執行
2. **智能分析流程**：5 步驟深度分析（任務拆解、風險評估、方案選項）
3. **記憶系統整合**：自動任務追蹤、權重管理、學會忘記
4. **三模式支援**：Query / Action / Solo（根據授權詞自動切換）

---

## 📦 安裝方式

1. 複製 `.github/copilot-instructions.md` 到您的專案根目錄的 `.github/` 資料夾
2. 複製 `.copilot-memory/` 資料夾到您的專案根目錄
3. 重啟 VS Code

---

## 📂 記憶系統架構

```
.copilot-memory/
├── WEIGHT_CONFIG.md      # 任務權重配置（AI 提醒用戶調整優先級）
├── TIME_CONFIG.md        # 時間衰減配置（9 個閾值）
├── ACTIVE/               # 進行中的任務（動態記憶，權重 ≥80%）
├── COMPLETED/            # 已完成的任務（靜態記憶，權重 50%-80%）
└── ARCHIVE/              # 90 天以上的任務（可遺忘，權重 <10%）
```

### 記憶系統運作方式

1. **提出新任務** → AI 創建檔案到 `ACTIVE/`，權重 100%
2. **任務完成** → AI 壓縮為摘要，移到 `COMPLETED/`
3. **超過 90 天** → AI 提醒歸檔到 `ARCHIVE/`，可以忘記

---

## 🚀 使用方式

### Query Mode（預設模式）

AI 只分析、不執行，適合日常使用：

```
用戶：如何優化這段代碼？
AI：
## 問題重述
您希望優化效能。

## 深度分析
[任務拆解、潛在問題、依賴關係、風險評估]

## 方案選項
方案 A：重構（推薦 ⭐⭐⭐⭐⭐）
方案 B：快取優化

🤔 請選擇方案，或告訴我需要更詳細說明。

---
❓ 是否將此對話設定為任務並記錄到記憶系統？
[ ] 是，記錄為任務
[ ] 否，這只是一般問答
```

### Action Mode（執行模式）

需要明確授權詞：

```
用戶：請執行方案 A（或：開始修改、confirm、go ahead）
AI：[開始執行...]
```

## 🔧 自訂配置

### 修改記憶系統時間閾值

編輯 `.copilot-memory/TIME_CONFIG.md`：

```markdown
- 3h → 100%（剛提出）
- 6h → 95%
- 1d → 90%
...
```

### 修改 AI 行為規則

編輯 `.github/copilot-instructions.md`（建議先備份）

---

## ❓ 常見問題

### Q1：為什麼 AI 不執行我的請求？

A：預設是 Query Mode，需要明確授權詞（如「請執行」）才會切換到 Action Mode。

### Q2：記憶系統會自動建立檔案嗎？

A：會！AI 會在用戶提出任務後詢問：「是否記錄為任務？」，用戶同意後才建立。

### Q3：如何清空記憶系統？

A：刪除 `.copilot-memory/ACTIVE/` 和 `COMPLETED/` 內的檔案即可。

### Q4：可以關閉記憶系統嗎？

A：可以，編輯 `.github/copilot-instructions.md`，刪除「記憶系統規則」章節。

---

## 📜 授權

MIT License

---

## 🙏 貢獻

歡迎提交 Issue 或 Pull Request！

請參考：[CONTRIBUTING.md](CONTRIBUTING.md)

---

**最後更新**：2025-12-17
**版本**：v2.0（統一安全模式）
